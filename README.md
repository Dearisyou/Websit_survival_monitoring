# 网站存活监控系统

一个现代化的Web页面存活监控应用，支持多用户管理、实时监控、钉钉告警等功能。

## 功能特性

- ✅ 管理员登录系统
- ✅ 多用户管理和权限划分
- ✅ 登录后才能查看监控状态
- ✅ 管理员可配置监控告警和监控周期
- ✅ 钉钉机器人告警支持
- ✅ 现代化Bootstrap UI界面
- ✅ 实时监控状态更新
- ✅ 监控日志记录
- ✅ 响应时间统计

## 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 启动应用
```bash
python run.py
```

或者直接运行 `start.bat` 文件

### 3. 访问系统
打开浏览器访问: http://localhost:5000

默认管理员账号:
- 用户名: admin
- 密码: admin123

## 使用说明

### 用户管理
- 管理员可以创建新用户
- 支持管理员和普通用户两种角色
- 普通用户只能管理自己创建的监控项目

### 网站监控
- 添加需要监控的网站URL
- 配置检查间隔(建议5-10分钟)
- 设置请求超时时间
- 实时查看网站状态和响应时间

### 告警配置
- 支持钉钉机器人告警
- 当网站从正常状态变为故障时自动发送告警
- 可以为每个网站单独配置告警

### 钉钉机器人配置步骤
1. 在钉钉群中添加自定义机器人
2. 选择"自定义关键词"安全设置
3. 添加关键词"网站监控告警"
4. 复制Webhook地址到系统中

## 技术栈

- **后端**: Flask + SQLAlchemy + APScheduler
- **前端**: Bootstrap 5 + Bootstrap Icons
- **数据库**: SQLite
- **监控**: requests + 定时任务
- **告警**: 钉钉机器人API

## 项目结构

```
网站存活探测/
├── app/
│   ├── __init__.py          # 应用初始化
│   ├── models.py            # 数据库模型
│   ├── forms.py             # 表单验证
│   ├── monitor.py           # 监控核心功能
│   ├── routes/              # 路由模块
│   │   ├── auth.py          # 认证相关路由
│   │   └── main.py          # 主要功能路由
│   └── templates/           # HTML模板
│       ├── base.html        # 基础模板
│       ├── auth/            # 认证相关模板
│       └── main/            # 主要功能模板
├── requirements.txt         # 依赖包列表
├── run.py                  # 应用启动文件
├── start.bat               # Windows启动脚本
└── README.md               # 项目说明
```

## 注意事项

- 首次运行会自动创建数据库和默认管理员账号
- 建议在生产环境中修改默认密码和SECRET_KEY
- 监控任务在后台运行，重启应用后会自动恢复
- 数据库文件为 `monitor.db`，请注意备份

## 许可证

MIT License